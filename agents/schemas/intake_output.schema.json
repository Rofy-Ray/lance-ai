{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "IntakeOutput",
  "type": "object",
  "required": ["session_id","docs","session_flags","provenance"],
  "properties": {
    "session_id": {"type":"string"},
    "docs": {
      "type":"array",
      "items":{
        "type":"object",
        "required":["doc_id","type","summary","incidents"],
        "properties":{
          "doc_id":{"type":"string"},
          "type":{"type":"string"},
          "date":{"type":["string","null"]},
          "parties":{"type":"array","items":{"type":"string"}},
          "summary":{"type":"string"},
          "wheel_tags":{"type":"array","items":{"type":"string"}},
          "incidents":{
            "type":"array",
            "items":{
              "type":"object",
              "required":["incident_id","actor","target","wheel_tag","quote_span","page","line_range"],
              "properties":{
                "incident_id":{"type":"string"},
                "date":{"type":["string","null"]},
                "actor":{"type":"string"},
                "target":{"type":"string"},
                "wheel_tag":{"type":"string"},
                "summary":{"type":"string"},
                "quote_span":{"type":"string"},
                "page":{"type":"integer"},
                "line_range":{"type":"string"},
                "confidence":{"type":"number","minimum":0,"maximum":1},
                "urgent_flag":{"type":"boolean"}
              }
            }
          }
        }
      }
    },
    "session_flags":{
      "type":"object",
      "properties":{
        "child_urgent":{"type":"boolean"},
        "missing_critical_data":{"type":"array","items":{"type":"string"}}
      }
    },
    "provenance":{
      "type":"object"
    }
  }
}
